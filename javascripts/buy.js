// Obfuscated!

const _0x3e4b9d = _0x54f2;
(function (_0x13aa1d, _0x9ebb01) {
    const _0x35c3b1 = _0x54f2, _0x377bf2 = _0x13aa1d();
    while (!![]) {
        try {
            const _0x52c6ee = parseInt(_0x35c3b1(0x10d)) / 0x1 + parseInt(_0x35c3b1(0x120)) / 0x2 * (parseInt(_0x35c3b1(0x136)) / 0x3) + parseInt(_0x35c3b1(0x125)) / 0x4 * (parseInt(_0x35c3b1(0x145)) / 0x5) + -parseInt(_0x35c3b1(0x13b)) / 0x6 * (parseInt(_0x35c3b1(0x12e)) / 0x7) + -parseInt(_0x35c3b1(0x133)) / 0x8 * (-parseInt(_0x35c3b1(0x10a)) / 0x9) + -parseInt(_0x35c3b1(0x157)) / 0xa + -parseInt(_0x35c3b1(0x134)) / 0xb * (parseInt(_0x35c3b1(0x137)) / 0xc);
            if (_0x52c6ee === _0x9ebb01)
                break;
            else
                _0x377bf2['push'](_0x377bf2['shift']());
        } catch (_0x4edba1) {
            _0x377bf2['push'](_0x377bf2['shift']());
        }
    }
}(_0x20c5, 0x3df11));
function _0x54f2(_0x5d77fa, _0x2fbb6c) {
    const _0x20c508 = _0x20c5();
    return _0x54f2 = function (_0x54f28e, _0x5ce1ac) {
        _0x54f28e = _0x54f28e - 0x101;
        let _0x2f97d6 = _0x20c508[_0x54f28e];
        return _0x2f97d6;
    }, _0x54f2(_0x5d77fa, _0x2fbb6c);
}
document[_0x3e4b9d(0x101)] === _0x3e4b9d(0x115) ? document[_0x3e4b9d(0x142)](_0x3e4b9d(0x109), () => {
    const _0x593997 = _0x3e4b9d;
    console[_0x593997(0x103)](_0x593997(0x122)), addPrices(), addEventListeners();
}) : (console[_0x3e4b9d(0x103)](_0x3e4b9d(0x11f)), addPrices(), addEventListeners());
const removeBtnText = _0x3e4b9d(0x135);
function addPrices() {
    const _0x598523 = _0x3e4b9d, _0x39c46b = document[_0x598523(0x108)](_0x598523(0x13c));
    for (let _0x32dcaa = 0x0; _0x32dcaa < _0x39c46b[_0x598523(0x152)]; _0x32dcaa++) {
        _0x39c46b[_0x32dcaa][_0x598523(0x144)] = '£&thinsp;' + formatNumberToString(_0x39c46b[_0x32dcaa]['dataset'][_0x598523(0x123)]);
    }
}
function _0x20c5() {
    const _0x56e11f = [
        'json',
        'btn-remove',
        '\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22basket-column\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22basket-item-image\x22\x20src=\x22',
        'abort',
        '1688HGXdoD',
        '880LuorVq',
        'Remove\x20from\x20basket',
        '24HfqMuW',
        '22428yALYaJ',
        '\x20=\x20£\x20',
        'target',
        'scrollTo',
        '209958FFAaaX',
        'productPriceSpan',
        '/toBuy/confirm/',
        'VisibilityDiv',
        'groupTitleSpan',
        'then',
        'add',
        'addEventListener',
        'invisible',
        'innerHTML',
        '10litlAm',
        'value',
        'innerText',
        'stringify',
        'Your\x20order\x20quantity\x20must\x20be\x20a\x20whole\x20number',
        'application/json',
        'click',
        'location',
        'error',
        'remove',
        'round',
        'amountToProcess',
        'status',
        'length',
        'toString',
        '&#9662;',
        'floor',
        'keyup',
        '2230200IocBpD',
        'basket-row',
        'readyState',
        'This\x20has\x20already\x20been\x20put\x20in\x20the\x20basket!\x20If\x20you\x20want\x20more,\x20increase\x20the\x20stated\x20quantity.',
        'log',
        'createElement',
        'btn-purchase',
        'parentElement',
        'catch',
        'getElementsByClassName',
        'DOMContentLoaded',
        '14238AYxGlQ',
        'total-this-product',
        'Error:\x20Ensure\x20you\x20use\x20a\x20valid\x20numerical\x20quantity!\x20If\x20you\x20no\x20longer\x20want\x20this,\x20simply\x20click\x20\x22',
        '88474rlIbfv',
        'You\x20cannot\x20order\x20less\x20than\x20one!\x20If\x20you\x20no\x20longer\x20want\x20this,\x20simply\x20click\x20\x22',
        'classList',
        'item-quantity-input',
        'productName',
        'uniqueTransactionReference',
        'getElementById',
        '/toBuy/purchase',
        'loading',
        'getElementsByTagName',
        'OpenCloseIcon',
        'productId',
        'toLocaleString',
        'receiptInfo',
        'scrollHeight',
        '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22total-this-product\x20basket-column\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-remove\x22\x20type=\x22button\x22>',
        'basket-items-div',
        'div',
        'Loaded\x20(instantaneous)',
        '17248bsEyVS',
        'POST',
        'Loaded\x20(waited)',
        'productPrice',
        'change',
        '479928fYGZZB',
        'dataset',
        'toggle',
        'push',
        '\x22\x20width=\x2224\x22\x20height=\x2224\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22basket-column\x20centredText\x20centredContent\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22basket-item-title\x22>',
        '&hairsp;&times;',
        'Img',
        'unshift',
        'contains',
        '21ntzIoe'
    ];
    _0x20c5 = function () {
        return _0x56e11f;
    };
    return _0x20c5();
}
function addEventListeners() {
    const _0x1d19a8 = _0x3e4b9d;
    document[_0x1d19a8(0x108)](_0x1d19a8(0x105))[0x0][_0x1d19a8(0x142)](_0x1d19a8(0x14b), executePurchase);
    const _0x21d0bd = document['getElementsByClassName'](_0x1d19a8(0x13f));
    for (let _0x5df076 = 0x0; _0x5df076 < _0x21d0bd[_0x1d19a8(0x152)]; _0x5df076++) {
        const _0x349329 = _0x21d0bd[_0x5df076][_0x1d19a8(0x106)]['id'];
        _0x21d0bd[_0x5df076]['addEventListener']('click', () => {
            changeDivVisibility(_0x349329);
        });
    }
    ;
}
function addToBasket(_0xeeb47) {
    const _0x1e2c5b = _0x3e4b9d, _0x5cd3bc = document[_0x1e2c5b(0x104)](_0x1e2c5b(0x11e));
    _0x5cd3bc['classList'][_0x1e2c5b(0x141)]('basket-row'), _0x5cd3bc[_0x1e2c5b(0x126)][_0x1e2c5b(0x118)] = _0xeeb47[_0x1e2c5b(0x139)][_0x1e2c5b(0x106)][_0x1e2c5b(0x106)][_0x1e2c5b(0x126)][_0x1e2c5b(0x118)], _0x5cd3bc[_0x1e2c5b(0x126)][_0x1e2c5b(0x123)] = _0xeeb47[_0x1e2c5b(0x139)]['parentElement'][_0x1e2c5b(0x106)][_0x1e2c5b(0x126)]['productPrice'];
    const _0x4049a2 = document[_0x1e2c5b(0x108)](_0x1e2c5b(0x11d))[0x0], _0x3c611b = _0x4049a2[_0x1e2c5b(0x108)]('basket-row');
    for (let _0x42c6e1 = 0x0; _0x42c6e1 < _0x3c611b['length']; _0x42c6e1++) {
        console['log'](_0x3c611b[_0x42c6e1][_0x1e2c5b(0x126)]['productId']), console[_0x1e2c5b(0x103)](_0xeeb47['target']['parentElement'][_0x1e2c5b(0x106)][_0x1e2c5b(0x126)][_0x1e2c5b(0x118)]);
        if (_0x3c611b[_0x42c6e1]['dataset'][_0x1e2c5b(0x118)] === _0xeeb47[_0x1e2c5b(0x139)]['parentElement'][_0x1e2c5b(0x106)]['dataset'][_0x1e2c5b(0x118)]) {
            alert(_0x1e2c5b(0x102));
            return;
        }
    }
    const _0x2dc30c = _0x1e2c5b(0x131) + _0xeeb47['target'][_0x1e2c5b(0x106)]['parentElement'][_0x1e2c5b(0x116)](_0x1e2c5b(0x12b))[0x0]['src'] + _0x1e2c5b(0x129) + _0xeeb47[_0x1e2c5b(0x139)][_0x1e2c5b(0x106)][_0x1e2c5b(0x106)][_0x1e2c5b(0x126)][_0x1e2c5b(0x111)] + '</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-quantity\x20basket-column\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20class=\x22item-quantity-input\x22\x20type=\x22number\x22\x20value=\x221\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22item-price\x20basket-column\x22>@\x20£\x20' + formatNumberToString(parseFloat(_0xeeb47[_0x1e2c5b(0x139)][_0x1e2c5b(0x106)]['parentElement']['dataset'][_0x1e2c5b(0x123)])) + _0x1e2c5b(0x11c) + removeBtnText + '</button>';
    _0x5cd3bc[_0x1e2c5b(0x144)] = _0x2dc30c, _0x4049a2['append'](_0x5cd3bc), _0x5cd3bc[_0x1e2c5b(0x108)](_0x1e2c5b(0x130))[0x0][_0x1e2c5b(0x142)](_0x1e2c5b(0x14b), removeProductFromBasket), _0x5cd3bc[_0x1e2c5b(0x108)](_0x1e2c5b(0x110))[0x0][_0x1e2c5b(0x142)](_0x1e2c5b(0x124), checkValidQuantity), _0x5cd3bc[_0x1e2c5b(0x108)](_0x1e2c5b(0x110))[0x0][_0x1e2c5b(0x142)](_0x1e2c5b(0x156), checkValidQuantity), updateTotals(), window[_0x1e2c5b(0x13a)](0x0, document['body'][_0x1e2c5b(0x11b)]);
}
function removeProductFromBasket(_0x26eaf7) {
    const _0x4838df = _0x3e4b9d;
    _0x26eaf7[_0x4838df(0x139)]['parentElement'][_0x4838df(0x14e)](), updateTotals();
}
function checkValidQuantity(_0x4ffbe0) {
    const _0x1df70c = _0x3e4b9d;
    if (isNaN(_0x4ffbe0[_0x1df70c(0x139)][_0x1df70c(0x146)]))
        alert(_0x1df70c(0x10c) + removeBtnText + '\x22.');
    else {
        if (_0x4ffbe0['target'][_0x1df70c(0x146)] < 0x1)
            alert(_0x1df70c(0x10e) + removeBtnText + '\x22.'), _0x4ffbe0[_0x1df70c(0x139)][_0x1df70c(0x146)] = 0x1;
        else
            !Number['isInteger'](parseFloat(_0x4ffbe0[_0x1df70c(0x139)][_0x1df70c(0x146)])) && (alert(_0x1df70c(0x149)), _0x4ffbe0[_0x1df70c(0x139)]['value'] = Math[_0x1df70c(0x155)](_0x4ffbe0['target']['value']));
    }
    updateTotals();
}
function updateTotals() {
    const _0x14ca32 = _0x3e4b9d, _0x39389d = document[_0x14ca32(0x108)](_0x14ca32(0x11d))[0x0], _0x562430 = _0x39389d[_0x14ca32(0x108)]('basket-row');
    let _0x2c0942 = 0x0;
    for (let _0x573d05 = 0x0; _0x573d05 < _0x562430['length']; _0x573d05++) {
        const _0x5b94f1 = _0x562430[_0x573d05], _0xf72a5e = _0x5b94f1[_0x14ca32(0x108)]('item-quantity-input')[0x0][_0x14ca32(0x146)], _0x20c52b = _0x5b94f1[_0x14ca32(0x126)][_0x14ca32(0x123)] * _0xf72a5e;
        _0x5b94f1[_0x14ca32(0x108)](_0x14ca32(0x10b))[0x0][_0x14ca32(0x147)] = _0x14ca32(0x138) + formatNumberToString(_0x20c52b), _0x2c0942 += _0x5b94f1[_0x14ca32(0x126)][_0x14ca32(0x123)] * _0xf72a5e;
    }
    _0x2c0942 = Math[_0x14ca32(0x14f)](_0x2c0942 * 0x64) / 0x64;
    const _0x26bab0 = formatNumberToString(_0x2c0942);
    document[_0x14ca32(0x108)]('basket-total-price')[0x0][_0x14ca32(0x147)] = '£\x20' + _0x26bab0;
}
function formatNumberToString(_0x382a82) {
    const _0x172817 = _0x3e4b9d;
    _0x382a82 = parseFloat(_0x382a82);
    let _0x2184a7;
    return !Number['isInteger'](_0x382a82) ? _0x2184a7 = _0x382a82[_0x172817(0x119)](undefined, {
        'minimumFractionDigits': 0x2,
        'maximumFractionDigits': 0x2
    }) : _0x2184a7 = _0x382a82[_0x172817(0x119)](), _0x2184a7;
}
function executePurchase() {
    const _0x70a6e0 = _0x3e4b9d, _0x4559f6 = [], _0x14c739 = document[_0x70a6e0(0x108)]('basket-items-div')[0x0][_0x70a6e0(0x108)](_0x70a6e0(0x158));
    for (let _0x1196d4 = 0x0; _0x1196d4 < _0x14c739[_0x70a6e0(0x152)]; _0x1196d4++) {
        const _0x3ba758 = _0x14c739[_0x1196d4][_0x70a6e0(0x108)](_0x70a6e0(0x110))[0x0][_0x70a6e0(0x146)], _0x3eda8e = _0x14c739[_0x1196d4][_0x70a6e0(0x126)]['productId'];
        _0x4559f6[_0x70a6e0(0x128)]({
            'id': _0x3eda8e,
            'quantity': _0x3ba758
        });
    }
    let _0x3ed269 = 0x0;
    fetch(_0x70a6e0(0x114), {
        'method': _0x70a6e0(0x121),
        'headers': {
            'Content-Type': _0x70a6e0(0x14a),
            'Accept': 'application/json'
        },
        'body': JSON['stringify']({ 'items': _0x4559f6 })
    })['then'](_0x1b2458 => {
        const _0x4ce16a = _0x70a6e0;
        return _0x3ed269 = _0x1b2458[_0x4ce16a(0x151)], _0x1b2458[_0x4ce16a(0x12f)]();
    })[_0x70a6e0(0x140)](_0x4bfd63 => {
        const _0x2ee234 = _0x70a6e0;
        _0x3ed269[_0x2ee234(0x153)]()[0x0] === '2' ? (Prettypay['open'](_0x4bfd63['totalToCharge'], { 'askAddress': ![] }), Prettypay['setSuccessFunction'](_0x12dd76 => {
            const _0x1bf352 = _0x2ee234, _0x51a046 = _0x4bfd63[_0x1bf352(0x11a)];
            _0x51a046[_0x1bf352(0x12c)]({ 'uniqueTransactionReference': _0x12dd76[_0x1bf352(0x112)] }), clearItemsFromBasket(), updateTotals();
            const _0x49e257 = async () => {
                return await postReceipt(_0x51a046), _0x12dd76;
            };
            _0x49e257()[_0x1bf352(0x140)](_0x383bbb => {
                const _0x99a4cd = _0x1bf352;
                window[_0x99a4cd(0x14c)]['href'] = _0x99a4cd(0x13d) + _0x383bbb['uniqueTransactionReference'] + '/' + _0x383bbb[_0x99a4cd(0x150)] + '/' + _0x383bbb['currency'];
            });
        })) : Prettypay[_0x2ee234(0x132)](_0x4bfd63['message']);
    })[_0x70a6e0(0x107)](_0x8bb9a3 => {
        const _0x1ec3f0 = _0x70a6e0;
        console[_0x1ec3f0(0x14d)](_0x8bb9a3);
    });
}
function clearItemsFromBasket() {
    const _0x3763bc = _0x3e4b9d, _0x5857a6 = document[_0x3763bc(0x108)](_0x3763bc(0x11d))[0x0]['getElementsByClassName'](_0x3763bc(0x158));
    while (_0x5857a6['length'] > 0x0) {
        _0x5857a6[0x0][_0x3763bc(0x14e)]();
    }
}
function postReceipt(_0x2e683f) {
    const _0x3f9265 = _0x3e4b9d;
    fetch('/toBuy/postReceipt', {
        'method': _0x3f9265(0x121),
        'headers': {
            'Content-Type': _0x3f9265(0x14a),
            'Accept': _0x3f9265(0x14a)
        },
        'body': JSON[_0x3f9265(0x148)]({ 'receiptInfo': _0x2e683f })
    });
}
function changeDivVisibility(_0x590af3) {
    const _0x52ae10 = _0x3e4b9d, _0x290977 = document['getElementById'](_0x590af3 + _0x52ae10(0x13e)), _0x30c1e4 = document[_0x52ae10(0x113)](_0x590af3 + _0x52ae10(0x117));
    _0x290977[_0x52ae10(0x10f)][_0x52ae10(0x127)](_0x52ae10(0x143)), !_0x290977['classList'][_0x52ae10(0x12d)](_0x52ae10(0x143)) ? _0x30c1e4[_0x52ae10(0x144)] = _0x52ae10(0x12a) : _0x30c1e4[_0x52ae10(0x144)] = _0x52ae10(0x154);
}

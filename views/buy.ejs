<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/main.css">
    <script src="/javascripts/otherPages.js" async></script>
    <script src="../javascripts/buy.js" async></script>
    <title>Buy Services</title>
</head>
<body>

    <% const titleArray = 
        <!-- titleArray consists of the page title followed by the divisional titles in order. -->
        ['Buy Services from Firefly Fictional!']; 
    %>

    <%- include('./partials/headBannerTop.ejs') %>
    <%- include('./partials/headBannerBottom.ejs') %>

    <div class='belowHeadBannerOtherPages'>

        <%- include('./partials/pageTitle.ejs', {pageTitle: titleArray[0]}) %>

            <p class='centredText'>For surveillance, management services, or private investigations, our services are highly tailored to your needs and prices vary accordingly.<br>
                For these services, you are very welcome to <a href='/contact-form'><u>contact us</u></a> so that we can discuss your needs and offer a quote.</p>
            <br>

            <div class='productsDivOuter'>
                <div class='productsDivInner'>

                    <% let productArray = []%>
                    <!-- remove productArray lines if not used. -->
                    <% for (const [key, products] of Object.entries(buyablesJSON)) { %>
                        <% let divProductType = JSON.stringify(key).replace(/\W/g, '')+'Div' %>
                        <% divProductType = divProductType.charAt(0).toLowerCase() + divProductType.slice(1) %>
                        <div data-div-product-type='<%= divProductType %>'>
                            
                            <div class='groupTitleSpan'>
                                <h2>
                                    <span id='<%= divProductType %>OpenCloseIcon'>&#9662;</span>
                                    <span>&nbsp;<%= JSON.stringify(key).replace(/\"/g, "") %></span>
                                </h2>
                            </div>

                            <div id='<%= divProductType %>VisibiltyDiv' class='invisible'>

                                <% products.forEach(product => { %>
                                    <% if (product.note) { %>
                                        <%= product.note %> 
                                    <% }  else { %>
                                        <div class='infoTextOnBuyPage' 
                                            data-product-id='<%= product.id %>'
                                            data-product-name='<%= product.name %>'
                                            data-product-price='<%= product.price %>'
                                            >
                                            <img src='../images/<%=product.imgName %>' class='toBuyImage' />
                                            &ensp;
                                            <%= product.name %>
                                            <br>
                                            <!-- <div class='productPriceAndBuyButton'> -->
                                                <span data-product-price='<%= product.price %>' class='productPriceSpan'></span>
                                                <% if (product.unitSoldBy) { %>
                                                    <span class='productPriceNote'>
                                                        <small><small>(<%= product.unitSoldBy %>)</small></small>
                                                    </span>
                                                <% } %>
                                                <br><button type='button' class='addToBasketBtn' onclick='addToBasket(event)'>Add to basket</button></button>
                                            <!-- </div> -->
                                        </div>
                                        <% productArray.push(product) %>
                                    <% } %>
                                <% }) %>

                            </div>

                        </div>
                    <% } %>

                </div>
            </div>

            <div id='shopping basket'>
                <h2 class="section-header centredText">&ensp;ðŸ§º&ensp;Your Basket</h2>
                <div class="basket-individual-product">
                    <span class="basket-header basket-column">ITEM</span>
                    <span class="basket-header basket-column"></span>
                    <span class="basket-header basket-column">QUANTITY</span>
                    <span class="basket-header basket-column">PRICE</span>
                    <span class="basket-header basket-column">SUB-TOTAL</span>
                    <span class="basket-header basket-column"></span>
                </div>
                <div class="basket-items-div infoTextOnBuyPage">
                    <!-- This will be filled by DOM manipulation as items are cliked upon for purchase. -->
                </div>
                <div class="basket-total">
                    <span class="basket-total-title">Total:&emsp;</span>
                    <span class="basket-total-price">Â£ 0</span>
                </div>
                <div class="btn-purchase-container">
                    <button class="btn btn-purchase" type="button">PURCHASE</button>
                </div>
            </div>
            <br><br><br>
            <%- include('../prettypay/views/view.ejs')%>

    </div>

</body>
</html>
